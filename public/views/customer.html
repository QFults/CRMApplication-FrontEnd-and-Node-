<!DOCTYPE html>

<div class="container-fluid">

	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<a class="navbar-brand" ui-sref="home">
				<img alt="Brand" src="...">
			</a>
			<h2 class="text-center">Customer's Profile
				<span class="pull-right">
					<button 
					ng-click="editCustomerModal()"
					class="btn btn-warning">
						Edit
					</button>
					<button 
					ng-click="deleteCustomer()"
					class="btn btn-danger">
						Delete
					</button>
				</span>
			</h2>
		</div>
	</nav>

	<div class="row divBelowNav">

		<!-- Left Col -->
		<div class="col-md-6 well vh-90">
			<h3 class="text-center">
				Personal Information 
			</h3>

			<!-- Personal Info-->
			<div>
				<div ng-if="selectedCustomer.FirstName">
					<h5 class="bold underline">First Name</h5>
					<h5>
						{{ selectedCustomer.FirstName }}
					</h5>
				</div>
				<div ng-if="selectedCustomer.LastName">
					<h5 class="bold underline">Last Name</h5>
					<h5>{{ selectedCustomer.LastName }}</h5>
				</div>
				<div ng-if="selectedCustomer.LeadState">
					<h5 class="bold underline">Lead State</h5>
					<h5>{{ selectedCustomer.LeadState }}</h5>
				</div>
				<div ng-if="selectedCustomer.Email">
					<h5 class="bold underline">Email</h5>
					<h5>
						<a href="mailto:{{ selectedCustomer.Email }}">{{ selectedCustomer.Email }}</a>
					</h5>
				</div>
				<div ng-if="selectedCustomer.Phone">
					<h5 class="bold underline">Phone</h5>
					<h5>
						<a href="tel:{{ selectedCustomer.Phone }}">{{ selectedCustomer.Phone }}</a>
					</h5>
				</div>
				<div ng-if="selectedCustomer.DateAdded">
					<h5 class="bold underline">Customer Since</h5>
					<h5>{{ selectedCustomer.DateAdded | date:'medium'}}</h5>
				</div>
				<div 
				ng-if="selectedCustomer.StreetAddress 
				|| selectedCustomer.City 
				|| selectedCustomer.State 
				|| selectedCustomer.Zip">
					<h5 class="bold underline">Address</h5>
					<h5 ng-if="selectedCustomer.StreetAddress">
						{{ selectedCustomer.StreetAddress }}
					</h5>
					<h5 
					ng-if="selectedCustomer.City
					|| selectedCustomer.State
					|| selectedCustomer.Zip">
						{{ selectedCustomer.City }}<span ng-if="selectedCustomer.City">,</span> {{ selectedCustomer.State }} {{ selectedCustomer.Zip }}
					</h5>
				</div>
				<div ng-if="selectedCustomer.DOB">
					<h5 class="bold underline">Date of Birth</h5>
					<h5>{{ selectedCustomer.DOB }}</h5>
				</div>
				<div ng-if="selectedCustomer.Gender">
				<h5 class="bold underline">Gender</h5>
				<h5>{{ selectedCustomer.Gender }}</h5>
				</div>
			</div><!-- End Personal Info -->
			
			<!-- Full Contact Results -->
			<div class="greyTopBorder">
				<h3 class="text-center">Full Contact Results</h3>
				<button ng-click="getFCByEmail()" class="btn btn-info btn-block">Retrieve By Email</button>
				<!-- Contact Info -->
				<div ng-if="fcEmailResults.contactInfo">
					<h4>
						<span class="underline">Name</span>
					</h4>
					<p ng-if="fcEmailResults.contactInfo.givenName">
						{{ fcEmailResults.contactInfo.givenName }}
					</p>
					<p ng-if="fcEmailResults.contactInfo.familyName">
						{{ fcEmailResults.contactInfo.familyName }}
					</p>
					<!-- Websites -->
					<div ng-if="fcEmailResults.contactInfo.websites">
						<h4>
							<span class="underline">Websites</span>
						</h4>
						<ul>
							<li ng-repeat="website in fcEmailResults.contactInfo.websites">
								<a href="{{ website.url }}">{{ website.url }}</a>
							</li>
						</ul>
					</div>
				</div>
				<!-- Demographics -->
				<div ng-if="fcEmailResults.demographics">
					<h4><span class="underline">Demographics</span></h4>
					<p>{{ fcEmailResults.demographics.locationGeneral }}</p>
				</div>
				<!-- Digital Footprint -->
				<div ng-if="fcEmailResults.digitalFootprint">
					<h4>
						<span class="underline">Digital Footprint</span>
					</h4>
					<p ng-repeat="score in fcEmailResults.digitalFootprint.scores">
						{{ score.type }} {{score.provider}} score: {{ score.value }}
					</p>
					<p>
						Score(s) based on: <span ng-repeat="topic in fcEmailResults.digitalFootprint.topics">
							{{ topic.value }} 
						</span>
					</p>
				</div> <!-- Digital Footprint -->
				<div ng-if="fcEmailResults.socialProfiles"><!-- Social Profiles -->
					<h4>
						<span class="underline">Social Profiles</span>
					</h4>
					<div ng-repeat="profile in fcEmailResults.socialProfiles">
						<ul>
							<li>
								<a class="underline" href="{{ profile.url }}">
									{{ profile.typeName }}
								</a>
							</li>
							<li>
								<ul class="marginLeft15px">
									<li ng-if="profile.followers">
										Followers: {{ profile.followers }}
									</li>
									<li ng-if="profile.username">
										Username: {{ profile.username }}
									</li>
								</ul>
							</li>
						</ul>
					</div> <!-- Repeat Social Profiles -->
				</div><!-- Social Profiles -->
				<!-- Organizations -->
				<div ng-if="fcEmailResults.organizations">
					<h4>
						<span class="underline">Organizations</span>
					</h4>
					<div ng-repeat="organization in fcEmailResults.organizations">
						<ul>
							<li class="underline">
								{{ organization.name }}
							</li>
							<li>
								<ul class="marginLeft15px">
									<li ng-if="organization.title">
										Title: {{ organization.title }}
									</li>
									<li ng-if="organization.current">
										Current: {{ organization.current }}
									</li>
									<li ng-if="organization.startDate">
										Start Date: {{ organization.startDate }}
									</li>
								</ul>
							</li>
						</ul>
					</div> <!-- Organizations Repeat -->
				</div><!-- Organizations -->
				<!-- Photos -->
				<div ng-if="fcEmailResults.photos">
					<h4>
						<span class="underline">Photos</span>
					</h4>
					<ul>
						<li ng-repeat="photo in fcEmailResults.photos">
							<img src="{{photo.url}}" alt="Profile Picture">
						</li>
					</ul>
				</div><!-- END Photos -->
			</div><!-- END Full Contact Results -->
		</div><!-- END Left Col -->

		<!-- START Right Col -->
		<div class="col-md-6 well vh-90">
			<h3 class="text-center">
				Notes
			</h3>
			<!-- START New Note -->
			<div>
				<div class="form-group">
					<input ng-model="newNoteSubject" type="text" placeholder="Subject" class="form-control">
				</div>
				<div class="form-group">
					<textarea ng-model="newNoteBody" placeholder="Body" cols="30" rows="6" class="form-control"></textarea>
				</div>
				<div class="pull-right form-group">
					<button 
					ng-click="setNewNoteMood('Happy')"
					class="btn btn-success moodBtn">
						:)
					</button>
					<button 
					ng-click="setNewNoteMood('Neutral')"
					class="btn btn-warning moodBtn">
						:|
					</button>
					<button 
					ng-click="setNewNoteMood('Mad')"
					class="btn btn-danger moodBtn">
						:(
					</button>
					<button 
					ng-click="saveNewNote()"
					class="btn btn-default">
						Save Note
					</button>
				</div>
			</div> <!-- END New Note -->
			<!-- START Current Notes -->
			<div 
			ng-repeat="note in customerNotes"
			class="greyTopBorder clearfix paddingTop10px">
				<div class="form-group">
					<label>
						<span ng-if="note.Mood" class="smallerMoodBtn">
							<button 
							ng-if="note.Mood == 'Happy'"
							class="btn btn-success moodBtn cursorDefault">
								:)
							</button>
							<button 
							ng-if="note.Mood == 'Neutral'"
							class="btn btn-warning moodBtn cursorDefault">
								:|
							</button>
							<button 
							ng-if="note.Mood == 'Mad'"
							class="btn btn-danger moodBtn cursorDefault">
								:(
								</button>
						</span>
						{{ note.DateAdded | date:'medium' }} - {{ note.Author }}
					</label>
					<input type="text" class="form-control cursorText" readonly value="{{ note.Subject }}">
				</div>
					<div class="form-group">
						<textarea cols="30" rows="6" readonly class="form-control cursorText">{{ note.Body }}</textarea>
					</div>
					<div class="form-group pull-right">
						<button 
						ng-click="editNote(note)"
						class="btn btn-warning marginRight3px">
							Edit
						</button>
						<button 
						ng-click="deleteNote(note)"
						class="btn btn-danger">
							Delete
						</button>
					</div>
			</div> <!-- END Current Notes ng-repeat -->
		</div><!-- END Right Col -->

	</div><!-- END Row 1 -->
</div><!-- END Main Container -->

<!-- START Edit Customer Modal -->
<div class="text-center modal fade" id="editCustomerModal" tabindex="-1" role="dialog" aria-labelledby="editCustomerTitle">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="editCustomerTitle">Edit Customer's Information</h4>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<label>First Name
						<input ng-model="editedCustomer.FirstName" class="form-control" type="text" value="{{ editedCustomer.FirstName }}">
					</label>
				</div>
				<div class="form-group">
					<label>Last Name
						<input ng-model="editedCustomer.LastName" class="form-control" type="text" value="{{ editedCustomer.LastName }}">
					</label>
				</div>
				<div class="form-group">
					<label>Lead State
						<input ng-model="editedCustomer.LeadState" class="form-control" type="text" value="{{ editedCustomer.LeadState }}">
					</label>
				</div>
				<div class="form-group">
					<label>Email
						<input ng-model="editedCustomer.Email" class="form-control" type="text" value="{{ editedCustomer.Email }}">
					</label>
				</div>
				<div class="form-group">
					<label>Phone
						<input ng-model="editedCustomer.Phone" class="form-control" type="text" value="{{ editedCustomer.Phone }}">
					</label>
				</div>
				<div class="form-group">
					<label>Street Address
						<input ng-model="editedCustomer.StreetAddress" class="form-control" type="text" value="{{ editedCustomer.StreetAddress }}">
					</label>
				</div>
				<div class="form-group">
					<label>City
						<input ng-model="editedCustomer.City" class="form-control" type="text" value="{{ editedCustomer.City }}" >
					</label>
				</div>
				<div class="form-group">
					<label>State
						<input ng-model="editedCustomer.State" class="form-control" type="text" value="{{ editedCustomer.State }}" >
					</label>
				</div>
				<div class="form-group">
					<label>Zip
						<input ng-model="editedCustomer.Zip" class="form-control" type="number" value="{{ editedCustomer.Zip }}" >
					</label>
				</div>
				<div class="form-group">
					<label>DOB
						<input ng-model="editedCustomer.DOB" class="form-control" type="text" value="{{ editedCustomer.DOB }}" >
					</label>
				</div>
				<div class="form-group">
					<label>Gender
						<input ng-model="editedCustomer.Gender" class="form-control" type="text" value="{{ editedCustomer.Gender }}">
					</label>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn" data-dismiss="modal">Close</button>
				<button ng-click="saveEditedCustomer()" type="button" class="btn btnPrimary" data-dismiss="modal">Save changes</button>
			</div>
		</div>
	</div>
</div><!-- END #editCustomerModal -->